<simulation xmlns:xi="http://www.w3.org/2001/XInclude">

    <schematype>flat</schematype>
    <control>
        <!--<duration>1800</duration>-->
        <duration>1000</duration>
        <startmonth>1</startmonth>
        <startyear>0</startyear>
        <decay>lazy</decay>
        <explicit_inventory>true</explicit_inventory>
    </control>

    <archetypes>
        <spec> <lib>cycamore</lib> <name>Source</name></spec>
        <spec> <lib>cycamore</lib> <name>DeployInst</name></spec>
        <spec> <lib>cycamore</lib> <name>Sink</name></spec>
        <spec> <lib>cycamore</lib> <name>Enrichment</name> </spec>
        <spec> <lib>cycamore</lib> <name>Reactor</name> </spec>
        <spec> <lib>cycamore</lib> <name>Storage</name> </spec>
        <spec> <lib>cycamore</lib> <name>FuelFab</name> </spec>
        <spec> <lib>cycamore</lib> <name>Separations</name> </spec>
        <spec> <lib>cycamore</lib> <name>Mixer</name> </spec>
        <spec><lib>cyclass</lib><name>Reactor</name><alias>cyclassReactor</alias></spec>
    </archetypes>


    <recipe>
        <name>r_u_nat</name>
        <basis>mass</basis>
        <nuclide><id>U235</id>   <comp>7.11000E-03</comp> </nuclide>
        <nuclide><id>U238</id>   <comp>9.92890E-01</comp> </nuclide>
    </recipe>

    <prototype>
        <name>nu_src</name>
        <config>
            <Source>
                <outcommod>c_u_nat</outcommod>
                <outrecipe>r_u_nat</outrecipe>

                <inventory_size>1e100</inventory_size>
                <throughput>1e100</throughput>
            </Source>
        </config>
    </prototype>


    <prototype>
        <name>waste</name>
        <config>
            <Sink>
                <in_commods><val>waste</val></in_commods>
                <capacity>1e100</capacity>
            </Sink>
        </config>
    </prototype>

    <prototype>
        <name>enrichment</name>
        <config>
            <Enrichment>
                <feed_commod>c_u_nat</feed_commod>
                <feed_recipe>r_u_nat</feed_recipe> 
                <product_commod>c_uox</product_commod>
                <tails_commod>waste</tails_commod>
                <max_feed_inventory>30000000</max_feed_inventory>
                <tails_assay>0.003</tails_assay>
                <tails_assay_uncertainty>0.001</tails_assay_uncertainty>
            </Enrichment>
        </config>
    </prototype>



    <prototype>
        <name>pwr</name>
        <lifetime>720</lifetime>
        <config>
            <Reactor>
                <fuel_inrecipes>
                    <val>PWR_UOX_new</val>
                </fuel_inrecipes>
                <fuel_incommods>
                    <val>c_uox</val>
                </fuel_incommods>
                <fuel_prefs>
                    <val>10</val>
                </fuel_prefs>

                <fuel_outrecipes> 
                    <val>PWR_UOX_spent</val>
                </fuel_outrecipes>
                <fuel_outcommods> 
                    <val>c_uox_spent</val>
                </fuel_outcommods>
                <cycle_time>18</cycle_time> <!-- BU/30days *Mcore/batch / P_eff = 50./(30)*88758./3./(3000*0.9) -->
                <refuel_time>0</refuel_time>
                <assem_size>29586.0</assem_size><!-- Core_inv / Core_Ass = 88758 / 3. -->
                <n_assem_core>3</n_assem_core>
                <n_assem_batch>1</n_assem_batch>
                <power_cap>1000</power_cap> <!-- P_th * Ef_th * Cap_fac = 3000*33.333%*0.9 -->

            </Reactor>
        </config>
    </prototype>

<!-- *********************** -->
  <recipe>
    <name>PWR_UOX_new</name>
    <basis>mass</basis>
    <nuclide><id>U238</id> <comp>0.9162</comp></nuclide>
    <nuclide><id>U235</id><comp>0.0838</comp></nuclide>
  </recipe>

  <!-- *** spent *** -->
  <recipe>
    <name>PWR_UOX_spent</name>
    <basis>mass</basis>
    <nuclide><id>U238</id>  <comp>0.8851</comp></nuclide>
    <nuclide><id>U235</id> <comp>0.0602</comp></nuclide>
    <nuclide><id>Am241</id> <comp>0.0040</comp></nuclide>
    <nuclide><id>Cs137</id> <comp>0.0507</comp> </nuclide>
  </recipe>
    <prototype>
        <name>storage_uox_spent</name>
        <config>
            <Storage>
                <in_commods>
                    <val>c_uox_spent</val>
                </in_commods>
                <out_commods>
                    <val>c_uox_spent_stored</val>
                </out_commods>
                <residence_time>0</residence_time>
            </Storage>
        </config>
    </prototype>

    <prototype>
        <name>deployer_main_CHAIN</name>
        <config>
            <DeployInst>
                <prototypes>
                    <val>waste</val>
                    <val>nu_src</val>
                    <val>enrichment</val>
                    <val>storage_uox_spent</val>
                    <val>pwr</val>
                </prototypes>

                <build_times>
                    <val>1</val>
                    <val>1</val>
                    <val>1</val>
                    <val>1</val>
                    <val>1</val>
                </build_times>

                <n_build>
                    <val>1</val>
                    <val>1</val>
                    <val>1</val>
                    <val>1</val>
                    <val>1</val>
                </n_build>
            </DeployInst>
        </config>
    </prototype>




    <agent> <name>deployer_1</name> <prototype>deployer_main_CHAIN</prototype> </agent>


</simulation>
